import React, { useEffect, useRef, useState } from 'react';
import PropTypes from 'prop-types';
import { navigate, useStaticQuery, graphql } from 'gatsby';
import { select, extent, scaleQuantize } from 'd3';
import { groupBy } from 'lodash';
import { Box, Button, Icon } from '@chakra-ui/core';
import DataProbe from './DataProbe';

import { slugify } from '../../utils/slugify';
import format from '../../utils/numberFormat';
import useIsMobile from '../../utils/useIsMobile';
import ZoomButton from '../../svg/zoom.svg';

import './index.css';

const TheMap = ({ indicator, onShare, metadata, selectedState, highRes, zoomOut }) => {
  let {
    allStatesJson: { states },
  } = useStaticQuery(graphql`
    {
      allStatesJson {
        states: nodes {
          state
          name
        }
      }
    }
  `);
  states = groupBy(states, 'state');

  const svgRef = useRef();

  const { state: stateId } = selectedState;

  const [isZoomOut, setIsZoomOut] = useState(!!zoomOut);

  const isMobile = useIsMobile();

  const [colorScale, setColorScale] = useState({ scale: () => '#0083E2' });

  const [dataPobreData, setDataPobreData] = useState(null);

  const values = Object.values(indicator)
    .map(a => parseFloat(a))
    .sort((a, b) => (metadata.positive === 'TRUE' ? b - a : a - b));

  useEffect(() => {
    const colors = [
      '#042351',
      '#1E306E',
      '#293989',
      '#184FAA',
      '#0066CB',
      '#0083E2',
      '#50BEFA',
      '#A2DCEE',
    ];
    if (metadata.positive === 'FALSE') colors.reverse();
    const scale = scaleQuantize().domain(extent(values)).range(colors).nice();
    setColorScale({ scale });

    const svg = select(svgRef.current);
    Object.keys(indicator).forEach(state => {
      svg
        .select(`#${state}`)
        .join(`#${state}`)
        .attr('fill', scale(indicator[state]))
        .attr('title', state)
        .on('click', () => {
          let [, path] = window.location.pathname.split('/');
          path = path || 'life-expectancy';
          navigate(`/${path}/${slugify(states[state][0].name)}`);
        })
        .on('mousemove', event => {
          if (isZoomOut) {
            setDataPobreData({
              selectedStateName: state,
              pos: [event.pageX, event.pageY],
              indicatorRank: values.indexOf(parseFloat(indicator[state])) + 1,
              indicatorName: metadata.title,
              dotColor: scale(indicator[state]),
              indicatorValue: format(
                indicator[state],
                metadata.unit,
                metadata.rounding,
                metadata.decimals,
                metadata.factor
              ),
            });
          }
        })
        .on('mouseleave', () => {
          if (isZoomOut) {
            setDataPobreData(null);
          }
        });
    });
  }, [isZoomOut]);

  function getOffset(element) {
    const bound = element.getBoundingClientRect();
    const html = document.documentElement;

    return {
      top: bound.top + window.pageYOffset - html.clientTop + bound.height / 2,
      left: bound.left + window.pageXOffset - html.clientLeft + bound.width / 2,
    };
  }

  useEffect(() => {
    if (!stateId) return;
    const svg = svgRef.current;

    const state = svg.querySelector(`#${stateId}`);
    const pos = [getOffset(state).left, getOffset(state).top];

    setDataPobreData({
      selectedStateName: stateId,
      pos,
      indicatorRank: values.indexOf(parseFloat(indicator[stateId])) + 1,
      indicatorName: metadata.title,
      dotColor: colorScale.scale(indicator[stateId]),
      indicatorValue: format(
        indicator[stateId],
        metadata.unit,
        metadata.rounding,
        metadata.decimals,
        metadata.factor
      ),
    });
  }, [stateId]);

  useEffect(() => {
    if (!stateId) return;
    const svg = svgRef.current;

    const zoomPaddingFactor = isZoomOut ? 1.1 : 2.8;
    // state is the state I want to zoom to
    const state = isZoomOut ? svg : svg.querySelector(`#${stateId}`);

    const bbox = state.getBBox();

    const pos = [getOffset(svg).left, getOffset(svg).top];

    if (!isZoomOut) {
      setDataPobreData({
        selectedStateName: stateId,
        pos,
        indicatorRank: values.indexOf(parseFloat(indicator[stateId])) + 1,
        indicatorName: metadata.title,
        dotColor: colorScale.scale(indicator[stateId]),
        indicatorValue: format(
          indicator[stateId],
          metadata.unit,
          metadata.rounding,
          metadata.decimals,
          metadata.factor
        ),
      });
    } else if (highRes) {
      setDataPobreData(null);
    }

    // the main SVG object and its current viewBox
    const viewBox = svg.getAttribute('viewBox');
    const vbox = viewBox.split(' ');
    vbox[0] = parseFloat(vbox[0]);
    vbox[1] = parseFloat(vbox[1]);
    vbox[2] = parseFloat(vbox[2]);
    vbox[3] = parseFloat(vbox[3]);

    // the current center of the viewBox
    const cx = vbox[0] + vbox[2] / 2;
    const cy = vbox[1] + vbox[3] / 2;

    const matrix = svg.getScreenCTM().inverse().multiply(state.getScreenCTM());

    // the new center
    const newx = (bbox.x + bbox.width / 2) * matrix.a + matrix.e;
    const newy = (bbox.y + bbox.height / 2) * matrix.d + matrix.f;

    // the corresponding top left corner in the current scale
    const absoluteOffsetX = vbox[0] + newx - cx;
    const absoluteOffsetY = vbox[1] + newy - cy;

    // the new scale
    const scale = ((bbox.width * matrix.a) / vbox[2]) * zoomPaddingFactor;

    const scaledOffsetX = absoluteOffsetX + (vbox[2] * (1 - scale)) / 2;
    const scaledOffsetY = absoluteOffsetY + (vbox[3] * (1 - scale)) / 2;
    const scaledWidth = vbox[2] * scale;
    const scaledHeight = vbox[3] * scale;

    svg.setAttribute('viewBox', `${scaledOffsetX} ${scaledOffsetY} ${scaledWidth} ${scaledHeight}`);
  }, [stateId, isZoomOut, colorScale]);

  return (
    <Box w="100%" h="100%" px={highRes ? '0px' : [5, 10]} bg="#E5E5E5" position="relative">
      {dataPobreData && <DataProbe {...dataPobreData} />}

      {!isMobile && (
        <Button
          onClick={() => onShare()}
          position="absolute"
          bottom={['10%']}
          right={['10%']}
          variant="link"
          size={['sm', 'md']}
          color="#403F3F"
          colorScheme="gray.900"
        >
          SHARE
          <Button
            as="div"
            marginLeft={2}
            leftIcon="share"
            fontSize={['30px', '45px']}
            variant="link"
            size="md"
            color="#403F3F"
            colorScheme="gray.900"
          />
        </Button>
      )}
      {!isMobile && highRes && (
        <Button
          onClick={() => setIsZoomOut(current => !current)}
          position="absolute"
          mb="60px"
          bottom={['10%']}
          right={['10%']}
          variant="link"
          size={['sm', 'md']}
          color="#403F3F"
          colorScheme="gray.900"
        >
          {!isZoomOut && <ZoomButton />}
          {isZoomOut && (
            <Box bg="#403F3F" borderRadius="100%">
              <Icon name="arrow-back" color="white" size="45px" />
            </Box>
          )}
        </Button>
      )}

      {!highRes ? (
        <svg
          ref={svgRef}
          version="1.1"
          id="states"
          xmlns="http://www.w3.org/2000/svg"
          width="100%"
          x="0px"
          y="0px"
          viewBox="0 0 1224 792"
        >
          <path
            id="TX"
            d="M422.3,637.8c11.9,0,24,0,36.6,0c5.9,12.9,11.8,25.7,17.5,38.6c3.7,8.2,7.2,16.5,10.7,24.8c0.7,1.6,1.8,2.5,3.4,3.4
	          c13.5,7.6,27.5,14.4,42,21.6c0-17.6,0-34.4,0-51.5c12.3-12.3,24.6-24.6,36.3-36.2c0-37.9,0-74.9,0-111.5
	          c-38.9-12.2-77.3-24.3-116.5-36.7c0-11.9,0-24,0-36.4c-10.1,0-19.5,0-29.5,0c0,36.6,0,72.8,0,109.8c-17.2,0-57.3,0-65.1,0
	          C357.7,563.6,400.7,613.3,422.3,637.8z"
          />
          <path
            id="NY"
            d="M1033.5,84.7c0,0-25.1,0-37.8,0c-10.9,10.9-35.7,36.2-36.1,37.4c-0.4,1.4-0.5,34.5-0.5,50.5c-24.1,0-48.3,0-72.8,0
            c0,10.4,0,19.8,0,29.2c-4.9,3.4-10.2,5.4-15.4,8.3c0,4.5,0,9.2,0,14.3c41.5,0,122.6,0,122.6,0l38.9,46.1L1033.5,84.7z"
          />
          <path
            id="ID"
            d="M281.8,283.7l0.7-73.8H253L194.6,94.3c0,0,0-19.8,0-24.4c-5.1,0-9.6,0-14.4,0c0,71.3,0,142.2,0,213.8H281.8z"
          />
          <path
            id="FL"
            d="M841.7,732.8c7.2-10.4,12.7-21.9,20-32.3c1.4-2,1.5-4.7,0.4-8.1c-8.7-27.8-18.9-55.2-27.3-83.2
            c-3.1-1.3-74.2-0.5-74.2-0.5l-1-8.2c0,0-32.3,0-42.5,0c0,7.6,0,14.5,0,21.8c19.4,0,38.4,0,57.5,0c5.4,7.1,10,14.5,14.7,21.8
            c2.9,4.4,1.7,9.6,2.3,14.2c1.8,15.2,4.1,30.4,5.6,45.9c14.6,9.7,29.2,19.5,43.8,29.2L841.7,732.8z"
          />
          <path
            id="WA"
            d="M85.8,177.9c15.4-3,30.4-5.5,45.6-9.3c9.3-2.3,18.4-1.9,27.6-2.3c4.3-0.2,8.5,0,13.4,0c0-32.4,0-64.2,0-96.3
            c-26.9,0-53.7,0-81.2,0c0,4.8,0,9.3,0,14.8c-15,0-29.3,0-44.1,0c5.1,27.7,10.1,54.3,15.1,81.6c7.3,0,14.5,0,21.6,0
            C85.4,171,85.8,177.9,85.8,177.9z"
          />
          <path
            id="ND"
            d="M503.3,69.9c-36.8,0-73.1,0-109.6,0c0,29.4,0,89,0,89h116.5C510.1,158.9,504,83.2,503.3,69.9z"
          />
          <path
            id="MN"
            d="M510.8,71.6l4.8,57.7l2.6,87.6h82.3l-16.6-42.6c0,0,0.1-34.9,0.1-52.8c16-17.1,49.8-50.5,49.8-50.5l-122.9-0.1
            L510.8,71.6L510.8,71.6z"
          />
          <polygon
            id="VA"
            points="974.4,423.3 907.6,372.6 861.3,416 815.7,416 792.8,438.1 959.2,438.1"
          />
          <polygon
            id="WI"
            points="630.9,121.3 593.3,121.3 591.8,171 621.1,246.5 665.2,246.5 667.4,179.1 684.8,152.6"
          />
          <polygon
            id="MD"
            points="1006.2,387.2 966.9,387.1 966.9,335.7 871.2,335.7 871.2,364.6 911.5,364.6 979.8,416.5"
          />
          <path
            id="KY"
            d="M812.2,409.5l-13.9-20.2L743,372.2l-84.9,51.3l-3.6,14.9c41.5,0,128.5,0,128.5,0L812.2,409.5z"
          />
          <path
            id="GA"
            d="M841.8,568.3c-16.8-24.2-53.4-77.9-53.4-77.9s-27.9,0-35.2,0c5,36.4,11.7,73,16.7,109.8c21.9,0,42.2,0,64.5,0
            c2.5-9.7,4.1-19.3,7.2-28.5L841.8,568.3z"
          />
          <path
            id="IA"
            d="M620.8,268.9c-6.8-14.8-18.5-44-18.5-44h-83.5l0.2,29.4l24.1,58.2h66.4l11.2-43L620.8,268.9L620.8,268.9z"
          />
          <polygon
            id="MA"
            points="1127.7,224.6 1128.8,261.5 1157.6,254.2 1157.6,203.3 1143.7,202.3 1136.9,209.5 1107.5,196.5 
            1040.7,196.5 1040.7,224.6"
          />
          <path
            id="AL"
            d="M760.5,594.9c-2-14.5-3.7-32.2-6.1-46.7c-2.4-14.1-3.7-28.3-6.4-42.4c-0.9-4.8-1.4-9.8-2.4-15.4
            c-16.9,0-33.9,0-51.2,0c0,41.4,0,124.7,0,124.7l14.8,7v-27.2H760.5z"
          />
          <path
            id="NC"
            d="M900.8,518.7l65.5-51.3c0,0,5.5-16.3,7.5-21.2c-49.1,0-101.2,0-150.6,0c-13.4,11.2-43.7,36.9-43.7,36.9s70,0,83.3,0
            c13.1,10.9,24.2,24.2,37.3,35.6H900.8z"
          />
          <polygon
            id="PA"
            points="849.3,237 849.1,327.4 969.8,327.4 996.8,298.2 979.1,265.8 1002.3,247.8 988.3,231.7 863.7,231.7 
            862.5,219.9"
          />
          <path
            id="LA"
            d="M627.6,542.8l-50.7-0.8c0,0,0,58.8,0,88.5c29.1,7.3,57.9,14.5,88.4,22.1c-5.1-22.7-9.9-44.1-14.9-66.1
            c-9.3,0-18.7,0-29,0c2.2-14.8,4.2-28.9,6.3-43L627.6,542.8L627.6,542.8z"
          />
          <polygon
            id="NJ"
            points="1006.4,297.3 994.4,313.4 1016.4,357.4 1040.4,340.7 1041.5,292.1 1007.2,255.2 988.8,268.9"
          />
          <path
            id="TN"
            d="M810.2,445.5c-2.6-1-157.1,0-157.1,0l-8,37.7c0,0,86.2-0.1,121.1-0.1c5.6-3.3,28-24.1,44.1-36.3L810.2,445.5
            L810.2,445.5z"
          />
          <path
            id="ME"
            d="M1158.1,55.6l5.2,75.1l-49.4,49.2l-22.3-102.6c0,0,18.6-34,29.3-50.7L1158.1,55.6z"
          />
          <path
            id="WV"
            d="M818.9,356.9c-4.9,7.4-17.3,25.4-17.3,25.4s12.5,16.9,18.9,26.6c12.3,0,24.9,0,35.3,0
            c12.4-12.4,41.4-37.8,41.4-37.8l-33.8,0.8c0,0,0-23.9,0-36.5c-7.7,0-19.7,0-19.7,0l-0.5-15.4L818.9,356.9z"
          />
          <polygon id="DE" points="973.8,336 974,379.4 1010.6,379.4 1010.7,362.8 988.8,320" />
          <polygon id="NH" points="1084,83.7 1106.4,187 1063.6,187" />
          <path
            id="IL"
            d="M629,269.2c0,0-15.7,64.5-15.5,65.9c14.5,26.8,43.8,80.6,43.8,80.6l14.6-9.2c0,0,0-88,0-130.3c-4.5,0-9,0-13.8,0
            c0-7.6,0-22.4,0-22.4h-34.6L629,269.2z"
          />
          <path
            id="SC"
            d="M824.3,528.7l25.2,34.8l48.2-33.2l-39.1-40.5c0,0-57,0-61.3,0L824.3,528.7z"
          />
          <path
            id="AK"
            d="M91.9,608.6c-8.6,5.4-14.2,14-22.2,20.6c6,7.3,14.6,10,21.9,16.4c-13.3,11.1-22.9,25.6-36.5,36.2
            c0,0,16.9-10.7,18.8-12c20.3-13.1,40.7-26,61.6-39.2c6.7,4.4,13.7,8.9,21.3,13.9c0-24.9,0-48.8,0-73.3c-15.5-6.8-31.3-14-47.4-20.8
            c-2-0.9-4.6-0.4-6.7,1.8c-8.5,9-17.7,17.3-25.6,27.1c4.2,6.5,8.4,13.1,13,20.2c-7.1-0.5-12.7-3.8-19.2-5.1
            c-2.2,4.5-0.3,9.2-1.3,13.6c6.1,1.9,12.4-0.5,18.3,1.4L91.9,608.6z"
          />
          <g id="MI">
            <polygon points="757.7,120.8 717.5,83.6 657.8,77.2 625.2,110 687.1,143.7 708.1,121.2" />
            <polygon points="728.9,126.2 704.3,157.7 702.1,269.3 759.9,269.3 782,217.2 783.3,157.5 764.5,180.3" />
          </g>
          <path
            id="MT"
            d="M203.3,69.6c0,2.9,0.4,25,0.4,25l54.8,107.5c0,0,19.1,0.4,24,0.4c0-6.9,0.5-13.9,0.5-21.5c34.5,0,67.7,0,102.2,0
            c0-37.4,0-74.1,0-111.4C324.8,69.6,203.3,69.6,203.3,69.6z"
          />
          <path
            id="VT"
            d="M1041.6,187.4c3.7,0,8,0,13.3,0c7.1-33.5,14.4-67.6,21.9-103c-11.3,0-35.2,0-35.2,0S1040.4,186.6,1041.6,187.4z"
          />
          <polygon id="SD" points="393.9,166.2 394.3,246.6 455.7,246.7 510.8,252.7 509.7,166.2" />
          <path
            id="OR"
            d="M63.7,172.9c0,0-13,53.5-16.4,72.6c-2.2,12.1-0.4,25-0.4,37.9c42.1,0,83.5,0,125.5,0c0-36.8,0-73.3,0-110.3
            c-32.7-2.2-95.2,14.4-95.2,14.4L75.8,173c0,0-7.7,0-11.5,0L63.7,172.9L63.7,172.9z"
          />
          <polygon id="WY" points="291.9,187.7 290.3,304.9 385.2,305.5 385.2,187.7" />
          <path
            id="CT"
            d="M1040.4,232v37.3l8.2,6.5l35.4-6.8c0,0,0-24.2,0-37C1070.4,232,1040.4,232,1040.4,232z"
          />
          <path
            id="RI"
            d="M1091.4,232c0,0,0,24.4,0,36.7c10.6-2.3,20.3-4.4,29.2-7.7c0-10,0-19.2,0-29C1111.6,232,1091.4,232,1091.4,232z"
          />
          <path
            id="OH"
            d="M840.4,240.7c-14.5,11.9-29,23.8-43.9,35.9c-16.3,0-50.1,0-50.1,0v87.8l48.8,15.2l46.1-69.4c0,0-0.4-67.8-0.3-69.4
            h-0.6V240.7z"
          />
          <path
            id="NE"
            d="M393.9,254.2c-0.9,0.2-0.6,34.5-0.6,51.4c14.8,0,28.9,0,43.6,0c0,7.3,0,14.2,0,21.5c34.5,0,68.2,0,102.7,0
            c-6.6-18.7-26.8-66.8-26.8-66.8l-55.1-6.2L393.9,254.2z"
          />
          <path id="IN" d="M681.3,276.3l0.2,121.5l56.5-32.7c0,0,0-58.9,0-88.9h-56.7V276.3z" />
          <path
            id="CA"
            d="M46.9,291.1c0,0,0.1,28.6-0.1,40.3c0,2.8,0.9,5.1,2.1,7.4c25.1,50.1,50.2,100.2,75,150.4c3,6.1,6.8,9.9,12.9,12.8
            c16.8,8,33.3,16.7,49.7,25c1.5,5,0.2,9.9,0.9,14.9c9.9,0,19.3,0,29,0c0-29.4,0-58.5,0-88.6c-26.6-29.1-53.9-59-81.2-88.9
            c0-24.3,0-48.5,0-73.3C106.4,291.1,46.9,291.1,46.9,291.1z"
          />
          <path
            id="NV"
            d="M142.9,291.1c0,0-0.1,47.9-0.1,68c26.6,29.2,78.6,86.4,78.6,86.4h9c0,0,0-102.7,0-154.4
            C201.7,291.1,142.9,291.1,142.9,291.1z"
          />
          <path
            id="UT"
            d="M238.5,291.1v125.1c0,0,53.7,0,80.6,0c0-34.3,0-69,0-103.3c-12.2,0-24.1,0-36.6,0c0-7.3,0-14.2,0-21.8
            C268,291.1,238.5,291.1,238.5,291.1z"
          />
          <path id="CO" d="M327.2,312.6v103c33.7,0,102,0,102,0v-103H327.2z" />
          <path
            id="MO"
            d="M546.1,320.6l2.4,10.7l6,37c0,0-0.1,67.6-0.1,70.5c24.8,0,49,0,73.8,0c0,5.1,0,9.6,0,14.4c4.9,0,13.9,0,13.9,0
            l7.8-34l-44.1-82c0,0,0.9-13,0.9-16.5C587.5,320.6,546.1,320.6,546.1,320.6z"
          />
          <path
            id="KS"
            d="M437.3,335.4c0,0-0.4,79.8-0.3,80.2c0.1,0.4,108.9,0,108.9,0l0.2-41.9l-6.3-38.3H437.3z"
          />
          <path
            id="AZ"
            d="M238.2,424c0,0,0,22.4,0,29.5c-4.9,0-9.2,0-13.8,0c0,30,0,59.3,0,88.7c15.8,9.1,31.9,18.3,48,27.5
            c1.5,0.8,2.6,2.1,4.7,2.1c13.9-0.1,27.8-0.1,42-0.1c0-49.5,0-98.2,0-147.7C292.6,424,238.2,424,238.2,424z"
          />
          <path
            id="NM"
            d="M326.3,424l0.6,146.9h20.4v-14c0,0,45.3,0,67.1,0c0-44.5,0-132.9,0-132.9L326.3,424L326.3,424z"
          />
          <path
            id="OK"
            d="M422.8,424c0,0,0,15.2,0,21.5c12.3,0,36.3,0,36.3,0l0.8,38.8l87.5,26.2V424H422.8z"
          />
          <path
            id="AR"
            d="M554.6,445.1l0.1,66.5l21.2,7.8l1.5,15.1c0,0,33.4,0,51,0c4.8-24,9.7-48.4,14.7-73.5c-7,0-13.9,0-21.5,0
            c0-5.4,0-10.1,0-15.4L554.6,445.1z"
          />
          <path
            id="MS"
            d="M644.2,490.6c0,0-11.7,65-15.7,87.1c9.1,0,27.9,0,27.9,0l9.1,38.3c0,0,14.9,0,21.1,0c0-42.1,0-82.6,0-125.4H644.2z"
          />
          <g id="HI">
            <path
              d="M298,725.4c11.8-5.5,22.1-13.5,33.5-19.5c1.4-0.7,3.1-2.5,3.3-4c1.5-11.7,5.5-23,6.5-35
              c-7.2-4.7-14.3-9.4-21.8-14.3c-14.8,12.4-29.2,24.5-43.8,36.7c6.6,12.3,14.1,24.2,21.6,36L298,725.4L298,725.4z"
            />
            <polygon points="238.1,667 238.1,689 257.9,678" />
            <polygon points="201.4,663 209.4,689 183.2,678 183.9,663" />
          </g>
          <polygon id="DC" points="1063,412.5 1093.6,443.1 1120.3,418.8 1089.4,388.1" />
        </svg>
      ) : (
        <svg
          ref={svgRef}
          version="1.1"
          id="statesHigh"
          xmlns="http://www.w3.org/2000/svg"
          x="0px"
          y="0px"
          viewBox="0 0 687.82 523.94"
          xmlSpace="preserve"
        >
          <polygon
            id="OH"
            points="494.63,219.05 490.91,219.12 490.1,218.63 483.18,217.49 480.67,214.85 466.49,214.96 
            466.48,251.27 476.34,255.56 478.93,257.99 481.58,258.41 486.91,260.02 488.82,262.12 492.15,258.93 494.45,254.91 494.45,254.91 
            497.4,255.83 497.89,255.54 500.44,250.4 500.93,250.02 504.53,248.59 506.84,244.95 508.51,241.17 509.37,233.82 509.37,233.82 
            512.78,229.17 512.76,210.21 511.12,210.73 503.82,214.69 494.63,219.05 494.63,219.05 "
          />
          <polygon
            id="IL"
            points="433.86,205.73 406.91,205.87 405.88,215.98 405.88,215.98 402.81,216.58 402.28,216.89 
            401.18,221.83 396.24,234.27 396.76,240.49 405,250.63 405,250.63 410.34,267.08 412.4,268.76 414.87,274.16 420.37,279.75 
            421.41,278.29 421.41,278.29 424.97,279.02 425.43,278.71 426.66,274.88 428.94,274.97 432.28,268.66 432.28,268.66 432.28,268.66 
            432.87,265.22 435.52,260.62 436.28,253.88 438.46,245.03 438.62,216.7 438.47,216.67 438.47,216.67 435.29,214.02 435.29,214.01 
            434.43,207.5 433.86,205.73 "
          />
          <polygon
            id="WI"
            points="436.03,164.6 434.96,162.07 433.99,156.33 431.86,154.15 427.26,152.03 426.67,151.89 
            415.29,147.06 415.29,147.06 415.29,147.06 415.29,147.06 415.29,147.06 410.88,141.2 402.17,140.82 402.17,140.82 401.89,140.35 
            401.89,140.34 403.1,135.56 402.58,135.37 391.46,140.19 391.46,140.19 388.72,139.77 387.42,141.96 386.86,147.38 386.86,147.38 
            383.32,152.37 381.64,162.45 382.35,170.9 392.09,181.05 395.82,183.07 398.85,187.22 398.85,187.22 398.85,187.22 398.85,187.22 
            399.27,190.23 399.27,190.23 399.27,190.23 399.27,190.23 400.37,199.65 404.02,203.61 406.91,205.87 433.86,205.73 432.82,199.61 
            433.31,192.33 434.36,187.01 442.89,165.87 442.48,165.63 440.09,167.76 434.13,174.97 432.07,176.53 432.07,176.53 432.72,171.63 
            432.72,171.63 437.11,165.72 "
          />
          <polygon
            id="MA"
            points="608.38,201.34 595.88,201.18 589.98,201.1 589.04,204.19 587.87,210.31 608.5,210.62 
            609.71,211.4 609.71,211.4 610.69,214.95 612.23,218.32 612.23,218.32 612.23,218.32 615.9,217.17 617.71,217.47 621.72,215.98 
            623.37,210.83 623.18,210.35 622.65,210.36 621.25,213.36 621.25,213.36 620.77,213.67 619.63,213.67 619.08,213.4 615.99,207.56 
            615.45,207.25 613.74,207.24 613.4,206.85 614.47,203.87 616.22,203 614.72,200.27 608.38,201.34 608.38,201.34 "
          />
          <polygon
            id="VT"
            points="588.48,167.93 588.48,167.93 588.18,173.69 587.27,177.11 587.47,181.57 587.27,184.09 
            588.05,188.46 587.91,190.24 589.71,195.3 589.92,197.17 589.98,201.09 595.88,201.17 597.08,195.54 597.63,194.64 598.84,188.34 
            601.56,182.35 602.91,177.27 605.23,174.94 606.98,170.15 607.25,167.9 588.48,167.91 588.48,167.93 588.48,167.93 "
          />
          <polygon
            id="RI"
            points="604.19,210.56 603.88,221.6 606.15,221.41 608.64,220.04 609,217.34 609.71,216.69 
            611.25,218.58 612.23,218.32 612.23,218.32 610.68,214.96 609.7,211.4 608.5,210.63 "
          />
          <polygon
            id="NH"
            points="605.24,174.94 602.92,177.27 601.56,182.35 598.84,188.34 597.64,194.64 597.09,195.54 
            595.89,201.17 608.38,201.33 614.72,200.26 615.81,196.76 613.61,195.08 613.7,163.95 611.57,163.08 610.67,164.03 610.07,164.04 
            608.4,164.8 607.42,166.88 606.99,170.15 606.99,170.15 605.24,174.94 "
          />
          <polygon
            id="CT"
            points="604.18,210.56 587.86,210.31 587.52,214.54 587.69,217.26 587,221.67 587.46,222.77 
            585.27,224.5 585.85,225.44 589.52,224.42 591.75,222.65 599.72,221.48 603.88,221.6 604.18,210.56 "
          />
          <polygon
            id="DE"
            points="561.83,244.27 563.32,260.73 570.19,260.98 570.33,255.55 566.69,253.05 566.14,248.6 
            565.24,245.39 565.76,242.57 "
          />
          <polygon
            id="PA"
            points="512.79,229.16 512.8,244.02 561.83,244.27 565.75,242.56 570.33,237.87 567.63,231.22 
            567.63,231.22 573.22,220.35 572.55,219.64 566.81,210.88 520.89,210.49 520.89,210.49 520.57,210.18 520.56,206.59 512.76,210.21 
            512.79,229.16 512.79,229.16 "
          />
          <polygon
            id="MD"
            points="566.6,263.47 567.1,263.53 567.42,264.28 567.42,264.28 566.98,268.3 567.46,268.44 
            567.92,268.1 569.07,264.9 569.55,262.27 570.18,260.99 563.32,260.74 563.31,260.74 561.83,244.27 524.3,244.08 524.23,250.06 
            531.31,247.57 537.25,247.19 537.25,247.19 540.75,248.68 543.1,250.01 542.31,251.74 546.57,253.5 547.36,252.87 548.67,254.15 
            547.28,255.24 547.28,255.24 547.27,255.24 547.27,255.24 548.39,257.55 545.61,260.91 549.35,263.48 550.28,263.67 554.03,265.47 
            554.5,265.15 553.91,263.33 553.91,263.33 554.06,262.78 553.49,256.97 553.49,256.97 556.1,247.65 556.35,247.16 556.35,247.16 
            558.29,246.64 559.83,246.26 559.68,247.74 558.29,249.72 558.51,250.19 559.03,250.26 559.03,250.26 559.34,250.65 559.34,250.65 
            557.15,256.41 557.4,256.93 558.67,257.66 558.89,258.49 558.69,259.04 558.91,263.87 559.2,264.36 560.71,264.65 561.18,265.02 
            561.18,265.02 561.42,266.53 561.68,266.82 562.85,268.69 562.86,268.69 565.08,268.26 565.6,265.81 565.61,265.77 "
          />
          <polygon
            id="NC"
            points="497.4,289.56 495.06,292.61 492.39,294.1 489.04,295.21 484.77,299.19 477.94,302.24 
            472.88,307.57 485.56,307.55 488.68,306.39 488.69,306.39 489.87,306.59 491.38,305.69 492.5,305.29 504.39,305.28 505.3,305.89 
            507.05,305.65 508.17,307.34 509.14,309.83 510.24,310.24 521.54,310.18 522.58,310.65 532.33,321.84 539.33,317.92 543.74,313.93 
            552.84,311 553.84,308.53 550.55,309.06 550.55,309.06 550.18,308.66 550.18,308.65 550.28,308.08 550.28,308.08 553.8,304.54 
            553.79,304.4 547.35,301.61 547.34,301.03 547.34,301.03 551.44,301.52 551.99,301.68 555.79,301.65 556.29,301.43 556.83,301.6 
            556.83,301.6 557.89,302.99 558.05,303 559.43,301.74 562.1,300.72 562.17,298.43 561.65,298.16 560.54,298.85 559.93,298.85 
            559.93,298.85 559.23,296.54 559,296 555.5,295.23 552.51,294.17 556.44,292.56 557.72,291.44 558.68,290.9 561.07,292.21 
            561.07,292.22 561.27,292.74 561.74,293.04 562.9,294.92 563.43,294.73 563.65,294.23 561.44,287.84 497.96,287.77 497.4,289.56 "
          />
          <polygon
            id="SC"
            points="510.24,310.25 510.24,310.25 509.14,309.84 509.13,309.84 508.16,307.35 507.05,305.67 
            505.3,305.9 504.39,305.29 492.5,305.29 491.38,305.69 489.87,306.59 488.69,306.39 485.56,307.56 482.5,307.72 482.5,307.72 
            482.5,307.72 482.29,310.23 503.97,334.8 503.97,334.8 506.28,344.47 507.89,344.47 510.44,341.93 532.33,321.84 522.58,310.66 
            521.54,310.19 510.24,310.25 "
          />
          <polygon
            id="ME"
            points="645.46,132.57 643.99,131.71 642.28,130.42 639.38,131.65 637.02,133.13 635.34,132.32 
            635.39,128.81 632.73,128.21 620.95,148.69 621.19,151.04 618.76,157.08 615.85,161.95 613.71,163.95 613.61,195.08 615.81,196.76 
            617.23,193.88 619.8,191.08 621.22,188.5 625.1,186.06 631.44,184.53 634.19,180.1 634.19,179.51 635.37,175.89 635.94,175.77 
            635.94,175.77 638.3,178.09 638.91,178.04 640.93,175.24 641.55,175.25 642.5,176.52 647.66,175.73 653.3,171.35 654.33,168.07 
            654.08,165.82 650.36,162.45 649.43,159.8 647.4,157.44 647.4,157.44 647.56,134.57 645.46,132.57 "
          />
          <polygon
            id="NJ"
            points="578.31,233.62 580.32,228.8 580.73,229.36 581.53,228.97 582.21,225.87 573.22,220.36 
            567.63,231.22 570.33,237.87 565.76,242.57 565.24,245.38 565.99,247.6 566.82,248.79 569.45,249.68 571.59,250.69 571.35,252.41 
            572.22,253.17 573.9,250.12 577.84,245.05 577.16,244.36 579.22,243.41 579.72,241.14 580.65,241.72 581,234.29 "
          />
          <polygon
            id="FL"
            points="493.14,363.72 493.14,363.72 493.14,363.72 493.14,363.72 491.18,362.38 466.03,362.33 
            465.5,362.1 462.63,358.3 437.16,358.7 438.55,364.24 440.28,363.95 442.76,365.11 451.29,364.93 454.08,366.23 461.03,369.38 
            462.75,372.18 471.79,369.97 473.43,368.13 473.43,368.13 474.04,368.22 474.04,368.22 478.58,372.75 480.68,374.44 485.23,381.62 
            486.18,383.9 486.53,397.3 487,397.31 488.86,394.83 488.86,394.83 489.41,394.9 488.77,401.72 490.73,407.91 495.48,411.31 
            497.66,414.91 497.74,415.8 500.98,420.4 506.55,423.47 506.99,423.89 507.08,424.81 508.46,426.21 508.46,426.21 508.39,426.78 
            508.39,426.78 507.99,427.94 508.39,428.67 512.9,427.99 514.18,424.37 514.53,425.21 515.33,425.63 515.86,424.87 515.68,406.36 
            515.45,405.81 511.47,399.16 508.62,388.37 508.62,388.38 514.54,401.14 516.18,403.13 516.74,401.47 513.01,393.29 512.04,389.4 
            509.88,384.22 504.54,376.31 501.83,371.15 501.66,363.19 501.66,363.19 496.38,360.4 "
          />
          <polygon
            id="ID"
            points="125.53,151.1 125.53,151.1 127.92,153.62 130,153.95 130.3,157.45 130.3,157.45 130.3,157.45 
            130.3,157.45 125.68,170.62 124.93,177.06 124.96,210.86 189.13,211.07 189.1,170.22 186.25,170.3 181.4,173.4 170.46,173.65 
            167.78,171.97 163.7,170.49 163.7,170.48 162.7,166.6 158.04,157.14 153.46,155.69 153.46,155.69 153.12,155.19 153.12,155.19 
            153.58,151.81 153.35,151.27 153.35,151.27 153.82,147.81 151.97,141.53 149.44,139.12 138.91,126.07 138.91,126.07 137.16,121.35 
            135.9,119.99 135.06,104.27 125.1,104.22 125.52,151.08 "
          />
          <polygon
            id="WA"
            points="65.52,107.03 67.28,110.29 68,112.38 67.9,114.99 69.6,121.08 69.6,121.08 67.09,128.82 
            66.77,129.34 64.63,131.69 64.2,131.33 64.2,131.33 64.84,127.63 64.3,121.92 62.99,119.54 50.71,115.81 50.7,115.81 44.13,113.82 
            43.85,114.13 43.61,116.74 45.96,123.81 47.6,127.36 48.22,130.16 49.2,132.96 49.5,133.46 52.34,134.44 50.06,135.38 49.55,135.66 
            49.38,136.21 49.58,137.04 49.79,137.6 52.61,140.84 50.12,143.81 49.84,144.29 51.15,145.87 58.22,147.05 58.23,147.05 
            61.17,150.77 61.41,155.21 90.96,155.11 94.1,153.73 99.54,153.21 106.16,151.46 125.66,151.34 125.66,151.34 125.09,104.22 
            64.64,103.94 "
          />
          <polygon
            id="OR"
            points="124.95,203.79 124.92,177.06 125.67,170.62 130.29,157.45 130,153.96 127.92,153.63 
            127.92,153.63 125.67,151.35 106.16,151.46 99.54,153.22 94.1,153.73 90.96,155.12 61.41,155.21 61.16,150.77 53.65,148.53 
            53.15,148.87 51.7,155.32 51.76,167.44 47.63,193.46 47.33,205.58 48.97,210.61 48.96,210.61 124.95,210.86 124.95,203.79 "
          />
          <polygon
            id="GA"
            points="498.72,328.86 482.28,310.24 482.49,307.72 457.46,307.7 457.46,307.87 463.76,340.1 
            463.87,342.13 463.87,342.13 463.87,342.14 462.64,347.21 462.42,352.43 462.88,355.33 462.92,358.29 462.92,358.29 462.92,358.29 
            462.92,358.29 462.9,358.34 465.51,362.09 466.03,362.33 491.18,362.37 493.14,363.72 496.38,360.39 496.38,360.39 501.66,363.18 
            501.66,363.18 503.44,351.03 503.95,350.06 504.81,346.93 506.27,344.47 503.96,334.8 498.72,328.86 "
          />
          <polygon
            id="AL"
            points="437.15,358.69 437.15,358.69 462.6,358.29 462.63,358.3 462.75,358.29 462.89,358.34 
            462.92,358.29 462.87,355.33 462.41,352.43 462.41,352.43 462.56,351.54 462.63,347.21 463.87,342.13 463.76,340.1 457.46,307.87 
            457.46,307.87 457.46,307.7 431.14,307.68 431.14,307.85 431.14,307.85 431.14,307.85 426.64,349.1 427.22,365.92 430.43,365.99 
            431.13,361.8 432.47,362.37 433.08,365.61 438.54,364.24 437.15,358.69 437.15,358.69 "
          />
          <polygon
            id="MS"
            points="426.64,349.1 431.13,307.85 431.13,307.68 408.37,307.67 403.41,314.83 398.95,324.54 
            399.28,328.68 399.28,328.68 399.28,328.68 399.06,331.3 398.4,333.11 398.31,333.62 399.21,340.1 399.16,341.9 397.99,346.02 
            395.74,350.95 395.49,354.19 393.88,357.82 394.28,358.43 412.45,358.34 414.88,365.16 424.79,365.54 427.22,365.92 426.64,349.1 
            "
          />
          <polygon
            id="CA"
            points="148.44,335.75 149.53,330.82 149.3,328.69 149.3,328.69 151.78,323.74 152.75,316.71 
            150.5,307.42 150.5,307.42 94.48,253.56 94.48,253.56 94.26,253.04 94.49,210.76 48.97,210.61 50.02,216.59 50.02,216.59 
            48.91,230.89 54.43,245.3 55.16,251.65 58.17,257.4 61.83,262.12 62.17,263.13 64.51,266.98 65.73,267.55 67.34,265.42 
            67.89,265.17 67.89,265.18 69.04,265.44 69.04,265.44 68.34,268.95 70.9,272.54 70.9,272.54 70.48,272.9 70.48,272.9 67.3,271.29 
            67.1,271.78 70.6,278.01 72.59,278.94 72.59,278.94 74.28,282.94 74.28,282.94 71.61,283.84 71.39,284.09 73.12,287.34 
            77.18,292.36 84.73,302.85 86.72,307.58 87.79,311.13 107.2,319.18 107.2,319.18 117.5,328.36 123.83,337.63 "
          />
          <polygon
            id="OK"
            points="362.42,323.92 364.34,325.49 364.13,294.98 364.13,294.98 361.75,287.4 361.75,287.4 
            361.77,280.05 272.67,279.58 272.68,287.21 303.73,287.6 304.11,312.97 306.83,314.08 309.77,315.67 312.83,315.78 314.65,316.91 
            324.81,318.82 327.65,321.53 332.67,321.73 334.53,322.21 339.65,321.93 344,323.21 350.66,321.05 354.56,320.88 362.42,323.92 "
          />
          <polygon points="546.58,253.51 547.27,255.23 547.27,255.23 548.66,254.15 547.36,252.87 546.58,253.51 " />
          <polygon
            id="NV"
            points="157.36,281.16 157.36,278.96 157.36,278.96 157.36,278.96 157.36,278.96 157.36,278.96 
            157.36,278.96 157.49,210.97 94.5,210.76 94.27,253.04 94.49,253.56 150.51,307.18 150.62,301.93 150.09,295.49 150.89,290.22 
            150.9,290.22 151.45,289.98 151.45,289.98 151.45,289.98 154.57,292.23 157.02,286.15 157.36,284.17 157.36,281.16 "
          />
          <polygon
            id="KY"
            points="420.37,279.76 420.37,279.76 419.34,282.66 416.86,285.99 416.77,287.19 480.26,287.74 
            480.26,287.55 480.26,287.55 488.72,277.92 490.66,276.98 493.58,273.97 493.57,273.94 493.57,273.94 493.57,273.94 493.34,272.39 
            492.58,270.48 492.31,268.52 488.81,262.13 486.9,260.02 481.58,258.41 478.93,258 476.34,255.57 466.47,251.28 466.41,251.29 
            464.95,252.38 464.59,254.17 464.95,254.52 464.95,254.53 463.9,258.03 463.34,258.28 460.63,256.86 458.95,259.33 456.63,262.81 
            449.33,266.74 449.32,266.74 446.73,266.07 444.59,268.73 444.59,268.73 444.01,268.52 444,268.52 444,268.52 442.44,266.99 
            438.5,268.37 438.5,268.37 436.37,266.94 432.29,268.66 428.94,274.98 426.67,274.88 425.44,278.71 425.44,278.71 424.97,279.03 
            421.42,278.3 420.37,279.76 420.37,279.76 "
          />
          <polygon
            id="IA"
            points="399.21,190.23 343.28,190.14 342.02,200.02 342.09,202.35 342.99,205.47 345.77,211.84 
            348.01,219.57 348.01,219.57 348.01,219.57 348.01,219.57 348.63,228.79 349.17,231.62 391.65,231.69 394.76,233.86 396.24,234.27 
            401.17,221.82 402.28,216.88 402.28,216.88 402.81,216.58 405.87,215.97 406.9,205.87 404.02,203.61 400.37,199.66 400.37,199.66 
            399.21,190.23 "
          />
          <polygon
            id="MO"
            points="396.75,240.5 396.24,234.27 396.23,234.27 394.75,233.87 391.65,231.7 349.17,231.63 
            353.12,239.9 355.72,242.09 356.87,243.4 358.19,244.43 359.67,246.62 361.02,247.5 361.7,248.19 361.78,280.05 361.78,280.05 
            361.78,287.4 409.37,287.54 409.38,287.54 407.56,294.17 413.71,294.43 416.76,287.19 416.85,285.99 419.34,282.66 420.36,279.76 
            414.87,274.16 412.39,268.76 410.34,267.08 410.34,267.08 404.99,250.63 396.75,240.5 "
          />
          <polygon
            id="NE"
            points="342.98,205.47 342.09,202.36 342.08,202.36 340.25,202.07 333.63,197.51 330.45,198.56 
            325.63,199.16 325.63,199.16 321.87,197.03 262.79,196.54 262.73,225.72 281.73,225.78 282.02,239.84 353.11,239.9 349.17,231.63 
            349.17,231.62 349.17,231.62 348.62,228.79 348.01,219.57 345.76,211.84 342.98,205.47 "
          />
          <g id="VA">
            <polygon
              points="562.86,268.69 562.85,268.69 562.44,270.31 560.74,274.73 561.19,278.19 561.75,278.25 563.84,274.08 
              565.08,268.26 562.86,268.69 	"
            />
            <polygon
              points="560.36,283.11 555.43,282.75 551,279.86 549.32,278.27 549.59,277.77 549.59,277.77 554.13,279.52 
              554.41,279.1 551.83,275.75 552,275.23 552.54,275.04 555.27,276.88 555.86,272.79 555.73,272.25 544.65,262.51 544.65,262.51 
              544.9,261.4 544.9,261.4 545.6,260.91 548.39,257.55 547.27,255.24 546.58,253.51 542.32,251.76 543.1,250.02 540.75,248.68 
              540.59,248.61 539.09,252.13 534.9,249.35 532.14,254.38 532.14,254.38 532.14,254.38 528.23,257.12 524.06,261.07 524.05,261.07 
              521.56,259.4 521.53,259.4 517.36,265.17 514.58,268.12 513.56,272.47 513.56,272.47 510.44,274.51 504.54,277.08 500.87,277.32 
              497.9,276.84 493.63,273.97 493.62,273.97 493.6,273.97 493.6,273.97 493.35,274.16 490.67,276.98 488.72,277.93 480.27,287.55 
              480.27,287.74 561.44,287.84 	"
            />
          </g>
          <polygon
            id="UT"
            points="157.37,278.96 209.76,279.24 209.96,225.55 189.47,225.48 189.47,225.48 189.15,225.17 
            189.13,211.07 157.49,210.97 157.37,278.96 "
          />
          <polygon
            id="CO"
            points="281.94,279.55 282.02,239.85 282.02,239.85 281.73,225.79 209.96,225.55 209.96,225.55 
            209.96,225.55 209.77,279.24 281.94,279.62 281.94,279.55 "
          />
          <polygon
            id="WY"
            points="189.47,225.47 189.47,225.48 189.47,225.48 262.73,225.72 262.78,196.54 262.78,196.54 
            262.84,168.22 189.1,168.28 189.13,170.21 189.13,170.21 189.16,225.17 189.47,225.47 "
          />
          <polygon
            id="SD"
            points="263.35,196.54 321.87,197.02 325.63,199.15 330.44,198.56 333.63,197.5 333.63,197.5 
            340.25,202.06 342.09,202.35 342.01,200.02 343.27,190.14 340.8,160.08 339.88,156.16 339.88,156.16 340.46,153.37 262.88,152.99 
            262.85,168.22 262.85,168.22 262.79,196.54 263.35,196.54 "
          />
          <polygon
            id="KS"
            points="282.02,239.85 281.94,279.62 361.77,280.04 361.7,248.19 361.02,247.5 359.67,246.63 
            358.18,244.43 356.86,243.4 355.71,242.09 353.12,239.91 282.02,239.85 "
          />
          <polygon
            id="AZ"
            points="192.39,279.15 157.37,278.96 157.36,284.17 157.36,284.17 157.36,284.18 157.03,286.14 
            154.58,292.24 154.58,292.24 154.58,292.24 154.57,292.23 151.45,289.98 150.9,290.22 150.1,295.49 150.63,301.93 150.51,307.42 
            152.76,316.71 152.76,316.71 151.79,323.75 149.3,328.69 149.53,330.82 149.53,330.82 148.44,335.8 187.82,354.77 188.43,354.91 
            209.48,354.92 209.76,279.25 192.39,279.15 "
          />
          <polygon
            id="TX"
            points="369.63,350.74 367.2,343.41 367.12,327.02 364.34,325.5 364.34,325.5 364.34,325.49 
            362.41,323.92 354.56,320.88 350.66,321.06 344,323.21 344,323.21 339.65,321.94 334.52,322.21 332.67,321.74 327.65,321.54 
            324.81,318.82 314.65,316.91 314.65,316.91 314.65,316.91 312.83,315.78 309.77,315.67 306.83,314.08 304.11,312.97 303.73,287.61 
            271.76,287.2 270.77,344.1 234.95,344.27 234.97,347.8 234.97,347.8 234.97,347.81 238.55,349.32 244.59,356.39 245.77,357.13 
            253.28,368.7 255.66,373.38 264.01,379.88 270.77,381.07 271.3,380.81 273.65,374.79 276.89,371.79 280.93,371.69 294.39,376.73 
            296.29,378.82 299.8,386.03 300.45,387.97 304.65,393.8 309.09,398.62 311.62,402.56 313.92,407.66 321.62,414.23 332.31,418.02 
            332.43,417.7 331.19,412.21 331.19,412.21 331.61,408.35 330.71,401.99 330.71,401.99 332.28,396.97 332.21,395.4 333.47,393.3 
            333.47,393.3 336.21,392.05 338.36,389.48 343.1,385.74 343.68,385.76 343.68,385.76 342.96,388.92 343.31,389.34 349.28,385.71 
            354.29,381.06 357.58,376.13 357.58,376.13 364.26,373.26 369.39,372.13 371.73,359.27 371.47,354.09 369.63,350.74 "
          />
          <polygon
            id="NM"
            points="234.95,344.27 270.77,344.09 271.76,287.2 272.67,287.21 272.66,279.58 209.77,279.25 
            209.49,354.92 217.09,354.92 217.38,348.2 234.97,347.8 234.95,344.27 "
          />
          <polygon
            id="LA"
            points="394.28,358.43 393.88,357.83 393.88,357.82 395.49,354.19 395.74,350.95 397.99,346.02 
            399.15,341.9 399.21,340.1 398.4,333.11 367.16,333.27 367.21,343.41 369.63,350.73 371.48,354.09 371.73,359.27 369.39,372.13 
            371.54,373.06 373.8,373.32 379,373.11 386.46,375.12 391.71,372.98 391.71,372.98 392.16,373.4 392.16,373.4 392.59,375.4 
            392.96,375.85 396,376.15 396,376.15 396.35,376.64 396.27,378.24 396.39,378.83 402.76,380.37 405.91,379.3 405.91,379.3 
            407.16,380.32 408.64,379.73 409.41,376.75 409.95,376.51 411.29,377.19 411.29,377.2 412.04,379.3 415.6,380.64 415.6,380.64 
            416.31,381.41 420.96,380.66 415.67,377.52 415.04,373.73 415.04,373.73 416.42,369.34 411.8,369.01 406.42,369.65 406.33,366.67 
            406.33,366.67 408.72,366.74 411.77,365.87 412.25,365.48 412.25,365.48 414.88,365.16 412.45,358.34 "
          />
          <g id="MI">
            <polygon
              points="427.26,152.03 431.86,154.14 433.99,156.33 433.99,156.33 434.96,162.07 436.04,164.6 437.12,165.72 
              440.78,159.98 442.43,155.31 442.96,155.09 444.04,155.83 445.16,156.29 445.66,155.07 446.63,154.28 447.13,156.76 448.82,155.79 
              453.7,151.91 459.86,151.59 464.4,152.42 467.39,154 469.62,152.3 475.05,152.36 475,151.84 473.29,149.88 473.29,149.88 
              473.45,148.37 472.7,145.95 470.09,144.75 466.24,144.56 465.71,144.22 465.1,141.88 460.69,141.31 459.72,141.05 456.18,141.86 
              450.18,141.89 447.51,143.77 447.51,143.77 446.91,143.63 446.09,143.11 445.5,143.07 444.15,144.08 444.15,144.08 443.09,143.52 
              441.56,143.22 435.7,139.04 428.75,136.31 428.13,136.35 427.54,135.7 427.55,135.7 431.7,131.48 431.92,130.92 431.95,128.56 
              431.47,128.37 418.16,138.13 418.16,138.13 413.64,138.96 410.88,141.2 415.29,147.06 426.67,151.88 427.26,152.03 	"
            />
            <polygon
              points="474.24,214.9 480.66,214.85 481.02,213.03 482.4,209.96 484.47,208.21 485.12,207.43 485.85,205.03 
              487.48,202.48 490.02,201.24 491.29,197.49 486.67,183.23 484.72,182.14 478.18,188.61 477.61,188.49 477.61,188.49 477.94,186.17 
              482.46,176.84 483.07,168.11 478.98,161.96 476.12,159.76 468.07,157.49 466.02,156.65 464.75,158.67 462.84,163.8 462.84,163.8 
              461.36,164.63 461.14,165.19 460.99,169.9 460.38,171.26 459.95,171.56 459.5,171.63 459.5,171.63 459.35,170.31 458.46,169.94 
              457.21,171.35 457.21,171.35 457.04,169.83 457.04,169.83 457.2,168.81 458.05,166.92 458.17,165.96 457.43,166.06 455.83,168.41 
              453.22,171.53 450.27,179.61 448.51,189.04 449.83,194.2 450.15,205.72 450.14,205.72 446.88,212.29 445.58,213.87 466.49,214.2 
              466.49,214.96 474.24,214.9 	"
            />
          </g>
          <polygon
            id="TN"
            points="416.76,287.19 413.71,294.43 413.71,294.44 413.7,294.44 412.07,299.23 410.16,301.06 
            409.28,303.37 408.37,307.66 472.87,307.57 477.93,302.23 484.77,299.18 489.04,295.21 492.39,294.09 495.06,292.61 497.4,289.56 
            497.95,287.77 "
          />
          <polygon
            id="MT"
            points="135.97,120.06 137.17,121.35 138.91,126.07 149.44,139.11 151.98,141.53 151.98,141.53 
            153.83,147.81 153.83,147.81 153.83,147.81 153.35,151.28 153.58,151.81 153.58,151.81 153.58,151.82 153.58,151.82 153.13,155.19 
            153.47,155.68 158.05,157.14 158.05,157.14 162.71,166.6 163.71,170.48 167.79,171.97 170.46,173.65 181.39,173.39 186.25,170.29 
            189.1,170.21 189.09,168.27 262.84,168.21 262.87,152.98 262.87,152.98 262.97,104.87 135.07,104.27 135.9,119.99 135.97,120.06 "
          />
          <polygon
            id="AR"
            points="409.27,303.37 410.16,301.06 412.07,299.23 413.7,294.44 407.55,294.17 409.37,287.55 
            361.78,287.4 364.14,294.97 364.14,294.97 364.14,294.97 364.34,325.49 367.13,327.02 367.13,327.02 367.16,333.26 398.4,333.1 
            399.06,331.3 399.27,328.68 398.95,324.54 403.41,314.82 408.36,307.66 "
          />
          <polygon
            id="MN"
            points="340.47,153.36 340.47,153.37 340.47,153.37 340.47,153.37 340.47,153.37 339.89,156.16 
            339.89,156.16 340.81,160.08 343.28,190.14 399.21,190.23 398.84,187.22 395.81,183.08 392.09,181.06 382.34,170.9 381.64,162.45 
            383.32,152.36 383.32,152.36 386.85,147.38 387.42,141.96 388.72,139.77 388.72,139.77 388.72,139.77 388.72,139.77 388.81,139.66 
            401.72,128.5 410.84,123.03 414.35,121.73 415.76,120.27 406.05,118.08 402.58,115.42 399.93,113.63 396.58,111.89 381.75,109.83 
            367.97,105.85 364.47,105.8 360.7,105.53 358.09,99.72 355.37,99.31 354.99,105.05 354.99,105.05 335.24,105.21 336.06,116.9 
            338.94,131.2 340.62,149.24 340.47,153.36 340.47,153.36 "
          />
          <polygon
            id="ND"
            points="297.57,153.15 340.46,153.36 340.61,149.24 338.94,131.2 336.06,116.9 335.24,105.21 
            262.97,104.87 262.88,152.98 297.57,153.15 "
          />
          <polygon
            id="IN"
            points="438.62,216.7 438.62,216.7 438.47,245.03 436.29,253.89 435.53,260.63 432.88,265.22 
            432.29,268.66 436.37,266.93 436.37,266.93 438.5,268.36 442.44,266.99 444.01,268.52 444.59,268.73 446.73,266.07 446.73,266.07 
            449.33,266.73 456.63,262.81 458.94,259.32 460.63,256.85 463.33,258.27 463.89,258.03 464.94,254.53 464.58,254.18 464.94,252.38 
            464.94,252.38 466.41,251.28 466.47,251.27 466.48,214.96 466.48,214.96 466.49,214.2 466.49,214.2 445.58,213.88 443.59,215.65 
            438.62,216.7 438.62,216.7 "
          />
          <polygon
            id="WV"
            points="524.3,244.26 524.3,244.08 512.8,244.02 512.78,229.18 509.37,233.82 508.52,241.17 
            506.84,244.96 504.53,248.59 504.53,248.59 500.93,250.03 500.44,250.41 497.89,255.54 497.89,255.54 497.4,255.84 494.46,254.91 
            492.16,258.93 488.82,262.13 492.31,268.52 492.58,270.48 493.35,272.39 493.58,273.94 493.58,273.96 493.59,273.96 493.6,273.96 
            493.62,273.96 493.64,273.97 497.9,276.83 500.87,277.31 504.54,277.07 510.44,274.51 513.55,272.47 514.58,268.12 514.58,268.12 
            517.35,265.17 521.52,259.39 521.56,259.39 524.06,261.06 528.23,257.12 532.14,254.38 534.9,249.35 539.09,252.14 540.59,248.61 
            537.25,247.2 531.31,247.57 524.23,250.06 524.3,244.26 "
          />
          <polygon
            id="DC"
            points="584.17,270.13 595.85,281.81 584.38,293.28 584.38,289.32 583.68,288.95 583.74,287.78 
            584.08,287.65 584.62,288.2 584.9,285.37 584.16,284.21 583.25,284.31 583.25,283.64 582.31,282.47 581.83,282.47 581.83,280.96 
            579.72,281.17 578.27,279.55 578.53,279.04 577.35,277.91 577.35,277.01 "
          />
          <g id="HI">
            <polygon points="172.62,405.9 168.73,408.44 170.85,412.09 175.62,412.74 176.33,411.27 172.62,405.9 	" />
            <polygon
              points="201.68,427.24 201.5,431.9 199.14,435.2 201.03,444.51 203.86,446.99 209.52,441.8 213.64,440.68 
              215.18,437.38 213.53,435.2 212.35,434.96 211.99,432.61 201.68,427.24 	"
            />
            <polygon
              points="191.54,416.04 193.01,417.69 196.2,417.4 199.91,419.93 198.85,421.76 194.31,422.58 190.48,418.34 
              191.54,416.04 	"
            />
            <polygon points="191.42,422.47 190.13,423.41 191.3,423.82 192.42,423.59 191.42,422.47 	" />
            <polygon points="185,417.93 187.24,417.63 188.77,419.34 187.18,420.4 185,417.93 	" />
            <polygon points="182.52,413.33 189.71,414.1 188.83,415.39 181.93,415.22 182.52,413.33 	" />
            <polygon
              points="152.58,398.24 149.4,399.01 147.63,401.31 149.63,403.19 152.58,403.72 154.46,399.6 152.58,398.24 	
              "
            />
            <polygon points="143.15,401.66 141.14,404.2 141.73,405.14 143.97,402.07 143.15,401.66 	" />
            <path
              d="M173.27,406.97l3.06,4.3l-0.71,1.47l-4.77-0.65l-2.12-3.66l3.89-2.53L173.27,406.97L173.27,406.97z
              M201.68,427.24l-0.18,4.66l-2.36,3.3l1.89,9.31l2.83,2.48l5.66-5.19l4.13-1.12l1.53-3.3l-1.65-2.18l-1.18-0.24l-0.35-2.36
              L201.68,427.24L201.68,427.24z M190.48,418.34l3.83,4.24l4.54-0.82l1.06-1.83l-3.71-2.53l-3.18,0.29l-1.47-1.65L190.48,418.34
              L190.48,418.34z M191.42,422.47l-1.3,0.94l1.18,0.41l1.12-0.24L191.42,422.47L191.42,422.47z M186.18,419.4l1,1l1.59-1.06
              l-1.53-1.71l-2.24,0.29L186.18,419.4L186.18,419.4z M181.93,415.22l6.9,0.18l0.88-1.3l-7.19-0.77L181.93,415.22L181.93,415.22z
              M152.58,398.24l-3.18,0.77l-1.77,2.3l2,1.89l2.95,0.53l1.89-4.13L152.58,398.24L152.58,398.24z M143.15,401.66l-2,2.53l0.59,0.94
              l2.24-3.06L143.15,401.66L143.15,401.66z"
            />
            <polygon
              points="173.27,406.97 176.33,411.27 175.62,412.74 170.85,412.09 168.73,408.44 172.62,405.9 173.27,406.97 	
              "
            />
            <polygon
              points="201.68,427.24 201.5,431.9 199.14,435.2 201.03,444.51 203.86,446.99 209.52,441.8 213.64,440.68 
              215.18,437.38 213.53,435.2 212.35,434.96 211.99,432.61 201.68,427.24 	"
            />
            <polygon
              points="190.48,418.34 194.31,422.58 198.85,421.76 199.91,419.93 196.2,417.4 193.01,417.69 191.54,416.04 
              190.48,418.34 	"
            />
            <polygon points="191.42,422.47 190.13,423.41 191.3,423.82 192.42,423.59 191.42,422.47 	" />
            <polygon points="186.18,419.4 187.18,420.4 188.77,419.34 187.24,417.63 185,417.93 186.18,419.4 	" />
            <polygon points="181.93,415.22 188.83,415.39 189.71,414.1 182.52,413.33 181.93,415.22 	" />
            <polygon
              points="152.58,398.24 149.4,399.01 147.63,401.31 149.63,403.19 152.58,403.72 154.46,399.6 152.58,398.24 	
              "
            />
            <polygon points="143.15,401.66 141.14,404.2 141.73,405.14 143.97,402.07 143.15,401.66 	" />
          </g>
          <g id="AK">
            <polygon
              points="84.25,398.49 80.78,402.02 81.25,403.25 81.84,403.74 84.43,401.68 84.22,400.43 83.77,400.22 
              85.03,399.6 84.25,398.49 84.25,398.49 	"
            />
            <polygon points="63.63,393.21 61.73,393.76 64.42,394.74 64.3,393.59 63.63,393.21 63.63,393.21 	" />
            <polygon
              points="56.49,383.16 57.33,382.67 59.73,383.98 59.76,384.33 58.59,384.77 58.49,385.25 56.23,383.62 
              55.73,384.01 55.14,383.51 55.2,382.43 56.49,383.16 	"
            />
            <polygon
              points="62.89,410.95 62.15,411.27 62.44,411.64 61.2,412.59 61.21,412.81 63.73,411.39 63.44,411.04 
              63.18,411.25 63.01,411.21 62.89,410.95 62.89,410.95 	"
            />
            <polygon points="60.82,412.08 59.25,413.89 61.06,412.54 61.06,412.18 60.82,412.08 60.82,412.08 	" />
            <polygon points="53.59,415.71 49.97,415.79 51.52,415.33 51.57,414.85 51.98,414.99 51.82,415.3 53.59,415.71 	" />
            <polygon points="48.17,416.15 48.65,416.42 47.7,416.83 47.9,415.96 48.2,415.9 48.17,416.15 48.17,416.15 	" />
            <polygon
              points="103.16,360.23 103.16,393.3 104.68,394.06 105.92,393.49 108.48,397 110.86,395.1 119.6,408.4 
              118.65,408.97 115.99,405 115.73,404.34 114.02,404.37 113.71,405.6 113.27,403.56 113.13,402.98 112.43,399.13 112.06,399.73 
              110.57,397.4 110.7,399.23 105.04,395.88 105.46,394.91 94.77,393.58 94.82,393 95.74,392.5 94.56,391.56 92.7,392.06 
              92.54,392.71 93.07,393.03 93.02,394.18 87.36,396.88 86.81,396.51 88.25,395.07 87.02,395.38 89.22,391.3 91.05,391.87 
              89.82,390.35 87.04,391.9 87.23,392.34 83.85,397.03 84.79,397.61 77.22,404.81 77.48,405.16 72.71,407.46 72.79,406.91 
              67.58,409.77 73.16,405.76 73.79,406.02 76.38,403.5 76.75,403.61 79.37,397.71 77.45,398.47 76.67,397.98 76.77,398.89 
              76.35,399.16 73.89,397.56 73.26,398.68 71.82,398.58 71.35,394.1 69.46,395.09 66.69,392.76 67.32,392.16 65.93,390.25 
              68.21,384.22 69.91,384.8 71.24,383.54 71.01,383.2 71.24,382.86 71.9,383.54 73.47,382.91 73.08,380.37 72.61,380.16 
              73.39,379.74 73.52,378.91 65.38,379.51 64.72,377.67 63.33,376.55 63.04,375.47 69.36,372.41 69.36,374.24 72.11,374.42 
              72.45,373.64 73.03,373.69 72.87,373.17 71.82,373.17 70.88,371.15 71.4,371.12 71.79,371.62 72.32,370.92 65.01,365.33 
              79.71,352.47 81.25,353.21 82.09,353.36 103.16,360.23 	"
            />
            <polygon
              points="84.25,398.49 80.78,402.02 81.25,403.25 81.84,403.74 84.43,401.68 84.22,400.43 83.77,400.22 
              85.03,399.6 84.25,398.49 84.25,398.49 	"
            />
            <path d="M113.05,404.94" />
            <polygon points="63.63,393.21 61.73,393.76 64.42,394.74 64.3,393.59 63.63,393.21 63.63,393.21 	" />
            <polygon
              points="56.43,383.17 55.2,382.43 55.14,383.51 55.73,384.01 56.23,383.62 58.49,385.25 58.59,384.77 
              59.76,384.33 59.73,383.98 57.33,382.67 56.43,383.17 56.43,383.17 	"
            />
            <polygon
              points="62.89,410.95 62.15,411.27 62.44,411.64 61.2,412.59 61.21,412.81 63.73,411.39 63.44,411.04 
              63.18,411.25 63.01,411.21 62.89,410.95 62.89,410.95 	"
            />
            <polygon points="60.82,412.08 59.25,413.89 61.06,412.54 61.06,412.18 60.82,412.08 60.82,412.08 	" />
            <polygon
              points="52.89,415.47 51.91,415.44 51.82,415.3 51.98,414.99 51.57,414.85 51.52,415.33 49.97,415.79 
              53.59,415.71 52.89,415.47 52.89,415.47 	"
            />
            <polygon points="48.2,415.9 47.6,416.46 47.7,416.83 48.65,416.42 48.17,416.15 48.2,415.9 48.2,415.9 	" />
          </g>
          <path
            id="NY"
            d="M596.52,226.23c0,0,2.21-1.33,1.6-1.16c-0.01,0.01-0.04,0.01-0.04,0.01l-0.34-0.51l-2.51,1.07
            l-3.28,0.71l-2.6,0.68l-5.19,0.73l1.69-2.31l-0.59-0.94l2.19-1.73l-0.46-1.27l0.69-4.24l-0.18-2.72l0.35-4.23l1.17-6.12l0.94-3.09
            l-0.06-3.93l-0.21-1.87l-1.8-5.06l0.14-1.78l-0.79-4.38l0.2-2.52l-0.2-4.45l0.92-3.42l0.29-5.78l-11.39,0l-1.29-0.45l-8.19,3.42
            l-7.1,4.55l-1.66,1.77l-0.02,0.04l-0.64,2.22l-1.36,2.17l0.01,2.66l-0.77,4.61h0l-10.74,3.3l-8.83,0.35l-6.85,1.48l-1.71,1.53
            l0.65,1.41l-0.02,1.86l0.11,0.96l-4.54,5.08l-2.88,1.5l-0.68,0.24l0.02,3.59l0.32,0.31l45.92,0.39h0l5.73,8.76l0.67,0.72l8.99,5.51
            l0.31,2.52l-1.52,1.88l-0.16,1.39l1.55,0.21l2.31-0.51l2.41-0.49l2.55-1.04l3.72-1.24l1.27-0.2l2.26-0.69l3.54-1.49l-0.5-0.48
            L596.52,226.23z"
          />
        </svg>
      )}
    </Box>
  );
};

TheMap.propTypes = {
  indicator: PropTypes.shape().isRequired,
  onShare: PropTypes.func,
  metadata: PropTypes.shape().isRequired,
  selectedState: PropTypes.shape(),
  highRes: PropTypes.bool,
  zoomOut: PropTypes.bool,
};

TheMap.defaultProps = {
  selectedState: { stateName: null, stateId: null },
  onShare: () => {},
  highRes: false,
  zoomOut: true,
};

export default TheMap;
